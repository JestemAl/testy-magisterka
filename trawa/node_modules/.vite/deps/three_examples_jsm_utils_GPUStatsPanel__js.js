import {
  stats_module_default
} from "./chunk-YQWH26EE.js";

// node_modules/three/examples/jsm/utils/GPUStatsPanel.js
var GPUStatsPanel = class extends stats_module_default.Panel {
  constructor(context, name = "GPU MS") {
    super(name, "#f90", "#210");
    const extension = context.getExtension("EXT_disjoint_timer_query_webgl2");
    if (extension === null) {
      console.warn("GPUStatsPanel: disjoint_time_query extension not available.");
    }
    this.context = context;
    this.extension = extension;
    this.maxTime = 30;
    this.activeQueries = 0;
    this.startQuery = function() {
      const gl = this.context;
      const ext = this.extension;
      if (ext === null) {
        return;
      }
      const query = gl.createQuery();
      gl.beginQuery(ext.TIME_ELAPSED_EXT, query);
      this.activeQueries++;
      const checkQuery = () => {
        const available = gl.getQueryParameter(query, gl.QUERY_RESULT_AVAILABLE);
        const disjoint = gl.getParameter(ext.GPU_DISJOINT_EXT);
        const ns = gl.getQueryParameter(query, gl.QUERY_RESULT);
        const ms = ns * 1e-6;
        if (available) {
          if (!disjoint) {
            this.update(ms, this.maxTime);
          }
          gl.deleteQuery(query);
          this.activeQueries--;
        } else if (gl.isContextLost() === false) {
          requestAnimationFrame(checkQuery);
        }
      };
      requestAnimationFrame(checkQuery);
    };
    this.endQuery = function() {
      const ext = this.extension;
      const gl = this.context;
      if (ext === null) {
        return;
      }
      gl.endQuery(ext.TIME_ELAPSED_EXT);
    };
  }
};
export {
  GPUStatsPanel
};
//# sourceMappingURL=three_examples_jsm_utils_GPUStatsPanel__js.js.map
